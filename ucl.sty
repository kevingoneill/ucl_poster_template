\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{ucl}[2025 UCL Poster Template]

%% turn off tikzposter logo on bottom
\tikzposterlatexaffectionproofoff

%% set up graphics path
\RequirePackage{graphicx}
\graphicspath{{./img/}}

%% set up fonts
\RequirePackage{fontspec}
\setmainfont{Arial}

\input{icons}
\input{ucl_logo}

%% set up UCL color palette
\definecolor{UCL_gray}{gray}{0.85}
\definecolor{UCL_purple}{RGB}{80,7,120}
\definecolor{UCL_green}{RGB}{82,193,82}
\definecolor{UCL_blue}{RGB}{52,198,198}
\definecolor{UCL_yellow}{RGB}{255,202,54}
\definecolor{UCL_pink}{RGB}{172,20,90}
\definecolor{UCL_dark_purple}{RGB}{44,4,66}
\definecolor{UCL_dark_green}{RGB}{17,59,58}
\definecolor{UCL_dark_blue}{RGB}{0,34,72}
\definecolor{UCL_dark_yellow}{RGB}{80,77,72}
\definecolor{UCL_dark_pink}{RGB}{75,10,50}
\definecolor{UCL_muted_purple}{RGB}{198,176,188}
\definecolor{UCL_muted_green}{RGB}{201,209,168}
\definecolor{UCL_muted_blue}{RGB}{182,220,229}
\definecolor{UCL_muted_yellow}{RGB}{218,214,202}
\definecolor{UCL_muted_pink}{RGB}{222,184,195}

%% define color style
\definecolorstyle{UCLcolors} {
    \definecolor{title}{named}{white}
    \definecolor{banner}{named}{black}
    \definecolor{background}{named}{white}
    \definecolor{portico}{named}{white}
    \definecolor{block}{gray}{.8}
    \definecolor{text}{named}{black}
 }{ % Background Colors
    \colorlet{backgroundcolor}{background}
    \colorlet{framecolor}{black}
    % Title Colors
    \colorlet{titlefgcolor}{title}
    \colorlet{titlebgcolor}{banner}
    % Block Colors
    \colorlet{blocktitlebgcolor}{banner}
    \colorlet{blocktitlefgcolor}{title}
    \colorlet{blockbodybgcolor}{block}
    \colorlet{blockbodyfgcolor}{text}
    % Innerblock Colors
    \colorlet{innerblocktitlebgcolor}{white}
    \colorlet{innerblocktitlefgcolor}{black}
    \colorlet{innerblockbodybgcolor}{white}
    \colorlet{innerblockbodyfgcolor}{black}
    % Note colors
    \colorlet{notefgcolor}{black}
    \colorlet{notebgcolor}{black}
    \colorlet{noteframecolor}{black}
    % color of portico
    \colorlet{UCL_portico}{portico}
}

\newcommand{\defineUCLpalette}{
    \definecolorpalette{UCL}{
        \definecolor{title}{named}{white}
        \definecolor{banner}{named}{black}
        \definecolor{background}{named}{white}
        \definecolor{portico}{named}{white}
        \definecolor{block}{named}{UCL_gray}
        \definecolor{text}{named}{black}
    }
}
\DeclareOption{purple}{
    \renewcommand{\defineUCLpalette}{
        \definecolorpalette{UCL}{
            \definecolor{title}{named}{white}
            \definecolor{banner}{named}{UCL_purple}
            \definecolor{background}{named}{white}
            \definecolor{portico}{named}{white}
            \definecolor{block}{named}{UCL_muted_purple}
            \definecolor{text}{named}{UCL_dark_purple}
        }
    }
}
\DeclareOption{green}{
    \renewcommand{\defineUCLpalette}{
        \definecolorpalette{UCL}{
            \definecolor{title}{named}{white}
            \definecolor{banner}{named}{UCL_dark_green}
            \definecolor{background}{named}{white}
            \definecolor{portico}{named}{white}
            \definecolor{block}{named}{UCL_muted_green}
            \definecolor{text}{named}{UCL_dark_green}
        }
    }
}
\DeclareOption{blue}{
    \renewcommand{\defineUCLpalette}{
        \definecolorpalette{UCL}{
            \definecolor{title}{named}{white}
            \definecolor{banner}{named}{UCL_dark_blue}
            \definecolor{background}{named}{white}
            \definecolor{portico}{named}{white}
            \definecolor{block}{named}{UCL_muted_blue}
            \definecolor{text}{named}{UCL_dark_blue}
        }
    }
}
\DeclareOption{yellow}{
    \renewcommand{\defineUCLpalette}{
        \definecolorpalette{UCL}{
            \definecolor{title}{named}{black}
            \definecolor{banner}{named}{UCL_yellow}
            \definecolor{background}{named}{white}
            \definecolor{portico}{named}{white}
            \definecolor{block}{named}{UCL_gray}
            \definecolor{text}{named}{black}
        }
    }
}
\DeclareOption{pink}{
    \renewcommand{\defineUCLpalette}{
        \definecolorpalette{UCL}{
            \definecolor{banner}{named}{UCL_pink}
            \definecolor{background}{named}{white}
            \definecolor{portico}{named}{white}
            \definecolor{block}{named}{UCL_muted_pink}
            \definecolor{text}{named}{UCL_dark_pink}
        }
    }
}


\ProcessOptions\relax


%% define title layout
\definetitlestyle{UCLtitle}{
    width=\paperwidth, roundedcorners=0, linewidth=0pt, innersep=1.5cm, titletotopverticalspace=0mm, titletoblockverticalspace=20mm
}{
    %% draw UCL logo
    \node[inner sep=0pt, outer sep=0pt, anchor=south east] (logo) at (\titleposright, \titleposbottom) {\resizebox{!}{.5\titleheight}{\ucllogo{banner}{portico}}};
    \draw[draw=none, fill=titlebgcolor, inner sep=0pt] (\titleposleft,\titlepostop) rectangle ($(logo.south west)+(1, 0)$);
    %% draw banner above the UCL logo
    \draw[draw=none, fill=titlebgcolor, inner sep=0pt] ($(logo.north west)+(0, -1mm)$) rectangle (\titleposright, \titlepostop);
    %% draw banner to the left of the UCL logo
    \draw[draw=none, fill=titlebgcolor, inner sep=0pt] (bottomleft) rectangle ($(bottomleft) + (\paperwidth, .4\titleheight)$);
}

%% Use standard rectangular blocks according to the color scheme
\defineblockstyle{UCLblock}{
    titlewidthscale=1, bodywidthscale=1,titleleft, titleoffsetx=0pt, titleoffsety=0pt, bodyoffsetx=0mm, bodyoffsety=15mm, bodyverticalshift=10mm, titleinnersep=6mm, bodyinnersep=1cm
}{
    \draw[color=framecolor, fill=blockbodybgcolor, draw=none] (blockbody.south west) rectangle (blockbody.north east);
    \ifBlockHasTitle
    \draw[color=framecolor, fill=blocktitlebgcolor, draw=none] (blocktitle.south west) rectangle (blocktitle.north east);
    \fi
}

%% choose layout theme
\defineUCLpalette
\definelayouttheme{UCL}{
    \usecolorstyle[colorPalette=UCL]{UCLcolors}  % set color style
    \usebackgroundstyle{Default} % Default, Rays, VerticalGradation, BottomVerticalGradation, Empty
    \usetitlestyle{UCLtitle} % Default, Basic, Envelope, Wave, VerticalShading, Filled, Empty
    \useblockstyle{UCLblock} % Default, Basic, Minimal, Envelope, Corner, Slide, TornOut
    \useinnerblockstyle[roundedcorners=0, titleleft]{Default} % Default, Table
    \usenotestyle{Default} % Default, Corner, VerticalShading, Sticky
}
\usetheme{UCL}

%% Set the title to align left instead of center
\settitle{\vbox{
    \vspace{1cm}
    \color{titlefgcolor} 
    {\fontsize{72}{86}\selectfont\bfseries \@title \par}
    \vspace*{1em}
    {\fontsize{48}{58}\selectfont \@author \par} 
    \vspace*{1em} 
    {\fontsize{28}{34}\selectfont \@institute}
}}

\endinput